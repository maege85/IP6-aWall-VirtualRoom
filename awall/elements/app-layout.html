<polymer-element name="app-layout">
    <script>
        Polymer({
            addWidget: function(widget) {
                this.setView('widget' + widget.position, widget.view);
            },
            /**
             * Sets the given view as the content of the target ID.
             * Only added if the given target does not have content yet.
             *
             * @param targetId The ID of the target element.
             * @param view The content to set as child element of the target.
             */
            setView: function(targetId, view) {
                var target = this.shadowRoot.getElementById(targetId);
                if (target) {
                    if (view) {
                        if (target.shadowRoot) {
                            console.error('The target ' + targetId + ' already has a widget!');
                            return;
                        }
                        var root = target.createShadowRoot();
                        root.appendChild(view);
                    }
                } else {
                    console.error('Element not found: ' + targetId);
                }
            }
        });
    </script>
</polymer-element>